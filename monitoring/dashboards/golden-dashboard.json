{
  "dashboard": {
    "title": "Osun HIS - Golden Metrics",
    "tags": ["osun-his", "clinical", "operational"],
    "refresh": "10s",
    "panels": [
      {
        "title": "API Request Rate",
        "targets": [
          "sum(rate(http_server_requests_seconds_count[1m])) by (method, status)"
        ]
      },
      {
        "title": "API p95 Latency",
        "targets": [
          "histogram_quantile(0.95, sum(rate(http_server_requests_seconds_bucket[5m])) by (le, endpoint))"
        ]
      },
      {
        "title": "API p99 Latency",
        "targets": [
          "histogram_quantile(0.99, sum(rate(http_server_requests_seconds_bucket[5m])) by (le, endpoint))"
        ]
      },
      {
        "title": "Error Rate",
        "targets": [
          "sum(rate(http_server_requests_seconds_count{status=~\"5..\"}[5m])) / sum(rate(http_server_requests_seconds_count[5m]))"
        ]
      },
      {
        "title": "OPD Throughput",
        "targets": [
          "sum(rate(opd_throughput_total[1m])) by (clinic)"
        ]
      },
      {
        "title": "Lab TAT p95",
        "targets": [
          "histogram_quantile(0.95, sum(rate(lab_tat_seconds_bucket[5m])) by (le, test_type))"
        ]
      },
      {
        "title": "Pharmacy Turn Time",
        "targets": [
          "histogram_quantile(0.95, sum(rate(pharmacy_turn_seconds_bucket[5m])) by (le, status))"
        ]
      },
      {
        "title": "Active Patients",
        "targets": [
          "sum(active_patients_total)"
        ]
      },
      {
        "title": "Active Encounters",
        "targets": [
          "sum(active_encounters_total)"
        ]
      },
      {
        "title": "Queue Length",
        "targets": [
          "sum(queue_length_total) by (clinic)"
        ]
      },
      {
        "title": "SLO Compliance",
        "targets": [
          "sum(rate(http_server_requests_seconds_count{status!~\"5..\"}[5m])) / sum(rate(http_server_requests_seconds_count[5m]))"
        ]
      },
      {
        "title": "JVM Memory",
        "targets": [
          "jvm_memory_used_bytes / jvm_memory_max_bytes"
        ]
      },
      {
        "title": "Database Connections",
        "targets": [
          "jdbc_connections_active"
        ]
      }
    ]
  }
}

